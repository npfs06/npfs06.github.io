---
title: 关于端口无法访问的问题的排查过程
date: 2021-04-16 17:30:37
updated: 2021-04-16 17:30:37
categories: problems
---

关于端口无法访问的问题的排查过程，自己有台服务器无法反弹shell，在CTF中做到像反弹shell这类涉及到VPS的题目，~~（懒的排查）~~我都是拿另一台可以反弹的VPS做的<!--more-->

趁着闲的无聊，抽空看了下 （这里以23180端口为例）

一下排查，均在开启http.server的前提下

> python3 -m http.server 23180



# 阿里云安全组

![](https://img.npfs06.top/20210416173728.png?imageView2/0/q/75|watermark/2/text/bnBmczA2LnRvcA==/font/5b6u6L2v6ZuF6buR/fontsize/340/fill/IzAwMDAwMA==/dissolve/62/gravity/SouthEast/dx/10/dy/10)

阿里云安全组是成功配置了的



# BT端口

![](https://img.npfs06.top/20210416174053.png?imageView2/0/q/75|watermark/2/text/bnBmczA2LnRvcA==/font/5b6u6L2v6ZuF6buR/fontsize/340/fill/IzAwMDAwMA==/dissolve/62/gravity/SouthEast/dx/10/dy/10)

宝塔端口也是正常开启的，但是还是无法成功访问端口



# firewall

最终原因是被firewall给拦截了

这里记录几个常见命令

**linux下安装firewall-cmd**

```shell
sudo apt-get install firewalld
```



**查看开放的端口**

```shell
firewall-cmd  --list-all
```

会得到如下图，其中**ports**为开放的端口，可以看到23180端口没有开放

![](https://img.npfs06.top/20210416174440.png?imageView2/0/q/75|watermark/2/text/bnBmczA2LnRvcA==/font/5b6u6L2v6ZuF6buR/fontsize/340/fill/IzAwMDAwMA==/dissolve/62/gravity/SouthEast/dx/10/dy/10)



**开放端口（比如开放23180）**

```shell
firewall-cmd --add-port=23180/tcp --permanent
firewall-cmd --reload   //重启
```

![](https://img.npfs06.top/20210416174550.png?imageView2/0/q/75|watermark/2/text/bnBmczA2LnRvcA==/font/5b6u6L2v6ZuF6buR/fontsize/340/fill/IzAwMDAwMA==/dissolve/62/gravity/SouthEast/dx/10/dy/10)

这个时候23180端口已经可以访问了，排查结束

**关闭端口**

```shell
firewall-cmd --remove-port=23180/tcp --permanent
firewall-cmd --reload
```



